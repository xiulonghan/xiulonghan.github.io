[{"title":"keras框架中融合层Merge各类函数的使用","slug":"keras-merge","date":"2019-08-09T07:34:37.000Z","updated":"2019-08-09T07:52:42.955Z","comments":true,"path":"2019/08/09/keras-merge/","link":"","permalink":"https://xiulonghan.github.io/2019/08/09/keras-merge/","excerpt":"在使用keras的过程中，会遇到融合层merge的使用，包括Add,Subtract,Multipy,Average,Maximum,Concatenate,Dot，以下就是对相关模块的简单示例，以备后续查看。代码如下：","text":"在使用keras的过程中，会遇到融合层merge的使用，包括Add,Subtract,Multipy,Average,Maximum,Concatenate,Dot，以下就是对相关模块的简单示例，以备后续查看。代码如下： 12345678910111213141516171819202122232425262728293031import numpy as npimport kerasfrom keras import backend as Kx1 = np.random.randint(5, size=(2, 2))x2 = np.random.randint(5, size=(2, 2))x1_t = K.variable(x1)x2_t = K.variable(x2)added = keras.layers.add([x1_t, x2_t])# 求多个张量的和，shape保持一致sub = keras.layers.subtract([x1_t, x2_t])# 求两个张量的差，shape保持一致mul = keras.layers.multiply([x1_t, x2_t])# 求多个张量的乘积，元素级别，shape保持一致ave = keras.layers.average([x1_t, x2_t])# 求多个张量的均值，元素级别，shape保持一致max = keras.layers.maximum([x1_t, x2_t])# 求多个张量的最大值，元素级别，shape保持一致concat = keras.layers.concatenate([x1_t, x2_t], axis=-2)# 连接多个张量，注意axis，如本例中，axis可以为[0,1,-1,-2]dot = keras.layers.dot([x1_t, x2_t], axes=1)# 求多个张量的dot，注意axisprint('the origin x1 is :\\n', x1)print('the origin x2 is :\\n', x2)print('the add is :\\n', K.eval(added))print('the subtract is :\\n', K.eval(sub))print('the multipy is :\\n', K.eval(mul))print('the average is :\\n', K.eval(ave))print('the maximum is :\\n', K.eval(max))print('the concat is :\\n', K.eval(concat))print('the dot is :\\n', K.eval(dot)) 输出结果 the origin x1 is : [[4 1] [1 1]]the origin x2 is : [[1 3] [2 2]] the add is : [[5. 4.] [3. 3.]]the subtract is : [[ 3. -2.] [-1. -1.]]the multipy is : [[4. 3.] [2. 2.]]the average is : [[2.5 2. ] [1.5 1.5]]the maximum is : [[4. 3.] [2. 2.]]the concat is : [[4. 1.] [1. 1.] [1. 3.] [2. 2.]]the dot is : [[7.] [4.]] 每日一句 If the people we love are stolen from us, the way to have them live on is to never stop loving them. Buildings burn, people die, but real love is forever.","categories":[{"name":"Deep Learning","slug":"Deep-Learning","permalink":"https://xiulonghan.github.io/categories/Deep-Learning/"}],"tags":[{"name":"keras","slug":"keras","permalink":"https://xiulonghan.github.io/tags/keras/"},{"name":"merge","slug":"merge","permalink":"https://xiulonghan.github.io/tags/merge/"},{"name":"深度学习","slug":"深度学习","permalink":"https://xiulonghan.github.io/tags/深度学习/"}],"keywords":[{"name":"Deep Learning","slug":"Deep-Learning","permalink":"https://xiulonghan.github.io/categories/Deep-Learning/"}]},{"title":"python解析号码归属地","slug":"phone-attribute","date":"2019-08-01T03:16:43.000Z","updated":"2019-08-01T08:14:49.369Z","comments":true,"path":"2019/08/01/phone-attribute/","link":"","permalink":"https://xiulonghan.github.io/2019/08/01/phone-attribute/","excerpt":"​ 在实际生产环境中，特别是进行运营商数据的处理时，会解析某个号码的归属地、运营商等。本文基于百度的开源接口实现号码归属地解析。代码如下：","text":"​ 在实际生产环境中，特别是进行运营商数据的处理时，会解析某个号码的归属地、运营商等。本文基于百度的开源接口实现号码归属地解析。代码如下： 123456789101112131415161718192021222324252627282930# 导入需求的包import demjsonimport urllib.request#定义号码解析函数def get_number_attribution(_number): \"\"\" Returns the attribution information of the input number。 :param _number: :return: _number,province,city,operator \"\"\" try: url = 'http://mobsec-dianhua.baidu.com/dianhua_api/open/location?tel='+str(_number) req = urllib.request.Request(url) resp = urllib.request.urlopen(req) content = resp.read() resp = demjson.decode(content) number_detail = resp['response'][_number]['detail'] city = number_detail['area'][0]['city'] province = number_detail['province'] operator = number_detail['operator'] print(\"号码：&#123;0&#125;，省份：&#123;1&#125;，城市：&#123;2&#125;，运营商：&#123;3&#125;\".format(_number, province, city, operator)) except ValueError: print(ValueError) #主函数入口if __name__ == '__main__': #测试号码 number = 'phone_number' get_number_attribution(_number=number) 示例： 1234567输入：18244226985输出：号码：18244226985，省份：四川，城市：成都，运营商：移动输入：17001111234输出：号码：17001111234，省份：北京，城市：北京，运营商：苏宁互联输入：19926782222输出：号码：19926782222，省份：广东，城市：揭阳，运营商：电信**注**：其中对于虚拟运营商号段，该接口输出的不是电信、移动、联通，而是具体的代理商。 每日一句The great pleasure in life is doing what people say you cannot do.","categories":[{"name":"Data Analysis","slug":"Data-Analysis","permalink":"https://xiulonghan.github.io/categories/Data-Analysis/"}],"tags":[{"name":"python","slug":"python","permalink":"https://xiulonghan.github.io/tags/python/"},{"name":"号码归属地","slug":"号码归属地","permalink":"https://xiulonghan.github.io/tags/号码归属地/"}],"keywords":[{"name":"Data Analysis","slug":"Data-Analysis","permalink":"https://xiulonghan.github.io/categories/Data-Analysis/"}]}]